<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Lua on 无名的旅人</title>
    <link>https://jrdeng.github.io/tags/lua/</link>
    <description>Recent content in Lua on 无名的旅人</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Fri, 30 Oct 2020 12:22:14 +0800</lastBuildDate><atom:link href="https://jrdeng.github.io/tags/lua/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Lua 5.4.x CMakeLists.txt</title>
      <link>https://jrdeng.github.io/post/8/</link>
      <pubDate>Fri, 30 Oct 2020 12:22:14 +0800</pubDate>
      
      <guid>https://jrdeng.github.io/post/8/</guid>
      <description>&lt;pre&gt;&lt;code&gt;cmake_minimum_required(VERSION 3.12)

project(Lua)

add_definitions(-DLUA_COMPAT_5_3)
if(UNIX)
    add_definitions(-DLUA_USE_LINUX)
endif(UNIX)


### force options
if(WIN32)
    add_compile_options(&amp;quot;$&amp;lt;$&amp;lt;C_COMPILER_ID:MSVC&amp;gt;:/utf-8&amp;gt;&amp;quot;)
    add_compile_options(&amp;quot;$&amp;lt;$&amp;lt;CXX_COMPILER_ID:MSVC&amp;gt;:/utf-8&amp;gt;&amp;quot;)
endif()

# see https://www.lua.org/manual/5.4/readme.html#other


### build lib
set(C_FILES lapi.c lcode.c lctype.c ldebug.c ldo.c ldump.c lfunc.c lgc.c llex.c lmem.c lobject.c lopcodes.c lparser.c lstate.c lstring.c ltable.c ltm.c lundump.c lvm.c lzio.c lauxlib.c lbaselib.c lcorolib.c ldblib.c liolib.c lmathlib.c loadlib.c loslib.c lstrlib.c ltablib.c lutf8lib.c linit.c)
# prepend &#39;src/&#39;
list(TRANSFORM C_FILES PREPEND &amp;quot;src/&amp;quot;)
# in C++ style
set_source_files_properties(${C_FILES} PROPERTIES LANGUAGE CXX)
add_library(lua STATIC ${C_FILES})


### build interpreter
set(C_FILES &amp;quot;src/lua.c&amp;quot;)
set_source_files_properties(${C_FILES} PROPERTIES LANGUAGE CXX)
add_executable(lua-interpreter ${C_FILES})
target_link_libraries(lua-interpreter lua)
if(UNIX)
    target_link_libraries(lua-interpreter m dl)
endif(UNIX)
set_target_properties(lua-interpreter PROPERTIES OUTPUT_NAME lua)


### build compiler
set(C_FILES &amp;quot;src/luac.c&amp;quot;)
set_source_files_properties(${C_FILES} PROPERTIES LANGUAGE CXX)
add_executable(luac ${C_FILES})
target_link_libraries(luac lua)
if(UNIX)
    target_link_libraries(luac m dl)
endif(UNIX)

# install target
install(TARGETS lua
    RUNTIME DESTINATION lib
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib
)
install(TARGETS lua-interpreter luac
    RUNTIME DESTINATION bin
)
install(FILES src/lua.hpp src/lua.h src/lualib.h src/lauxlib.h src/luaconf.h
    DESTINATION include
)
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
  </channel>
</rss>
